# 32ä¸ªæ‰‹å†™JSï¼Œå·©å›ºä½ çš„JSåŸºç¡€ï¼ˆé¢è¯•é«˜é¢‘ï¼‰

ä½œä¸ºå‰ç«¯å¼€å‘ï¼ŒJSæ˜¯é‡ä¸­ä¹‹é‡ï¼Œæœ€è¿‘ç»“æŸäº†é¢è¯•çš„é«˜å³°æœŸï¼ŒåŸºæœ¬ä¸Šofferä¹Ÿå®šä¸‹æ¥äº†å°±ç­‰å¼€å¥–ï¼Œè¶ç€è¿™ä¸ªæ—¶é—´æ€»ç»“ä¸‹32ä¸ªæ‰‹å†™JSé—®é¢˜ï¼Œè¿™äº›éƒ½æ˜¯é«˜é¢‘é¢è¯•é¢˜ï¼Œå¸Œæœ›å¯¹ä½ èƒ½æœ‰æ‰€å¸®åŠ©ã€‚

å…³äºæºç éƒ½ç´§éµè§„èŒƒï¼Œéƒ½å¯è·‘é€šMDNç¤ºä¾‹ï¼Œå…¶ä½™çš„å¤§å¤šä¼šæ¶‰åŠä¸€äº›å…³äºJSçš„åº”ç”¨é¢˜å’Œæœ¬äººé¢è¯•è¿‡ç¨‹

## 01.æ•°ç»„æ‰å¹³åŒ–

æ•°ç»„æ‰å¹³åŒ–æ˜¯æŒ‡å°†ä¸€ä¸ªå¤šç»´æ•°ç»„å˜ä¸ºä¸€ä¸ªä¸€ç»´æ•°ç»„

```JavaScript
const arr = [1, [2, [3, [4, 5]]], 6];
// => [1, 2, 3, 4, 5, 6]
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨flat()

```javascript
const res1 = arr.flat(Infinity);
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•äºŒï¼šåˆ©ç”¨æ­£åˆ™

```javascript
const res2 = JSON.stringify(arr).replace(/\[|\]/g, '').split(',');
å¤åˆ¶ä»£ç 
```

ä½†æ•°æ®ç±»å‹éƒ½ä¼šå˜ä¸ºå­—ç¬¦ä¸²

### æ–¹æ³•ä¸‰ï¼šæ­£åˆ™æ”¹è‰¯ç‰ˆæœ¬

```javascript
const res3 = JSON.parse('[' + JSON.stringify(arr).replace(/\[|\]/g, '') + ']');
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•å››ï¼šä½¿ç”¨reduce

```javascript
const flatten = arr => {
  return arr.reduce((pre, cur) => {
    return pre.concat(Array.isArray(cur) ? flatten(cur) : cur);
  }, [])
}
const res4 = flatten(arr);
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•äº”ï¼šå‡½æ•°é€’å½’

```javascript
const res5 = [];
const fn = arr => {
  for (let i = 0; i < arr.length; i++) {
    if (Array.isArray(arr[i])) {
      fn(arr[i]);
    } else {
      res5.push(arr[i]);
    }
  }
}
fn(arr);
å¤åˆ¶ä»£ç 
```

## 02.æ•°ç»„å»é‡

```javascript
const arr = [1, 1, '1', 17, true, true, false, false, 'true', 'a', {}, {}];
// => [1, '1', 17, true, false, 'true', 'a', {}, {}]
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•ä¸€ï¼šåˆ©ç”¨Set

```javascript
const res1 = Array.from(new Set(arr));
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•äºŒï¼šä¸¤å±‚forå¾ªç¯+splice

```javascript
const unique1 = arr => {
  let len = arr.length;
  for (let i = 0; i < len; i++) {
    for (let j = i + 1; j < len; j++) {
      if (arr[i] === arr[j]) {
        arr.splice(j, 1);
        // æ¯åˆ é™¤ä¸€ä¸ªæ ‘ï¼Œj--ä¿è¯jçš„å€¼ç»è¿‡è‡ªåŠ åä¸å˜ã€‚åŒæ—¶ï¼Œlen--ï¼Œå‡å°‘å¾ªç¯æ¬¡æ•°æå‡æ€§èƒ½
        len--;
        j--;
      }
    }
  }
  return arr;
}
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•ä¸‰ï¼šåˆ©ç”¨indexOf

```javascript
const unique2 = arr => {
  const res = [];
  for (let i = 0; i < arr.length; i++) {
    if (res.indexOf(arr[i]) === -1) res.push(arr[i]);
  }
  return res;
}
å¤åˆ¶ä»£ç 
```

å½“ç„¶ä¹Ÿå¯ä»¥ç”¨includeã€filterï¼Œæ€è·¯å¤§åŒå°å¼‚ã€‚

### æ–¹æ³•å››ï¼šåˆ©ç”¨includes

```javascript
const unique3 = arr => {
  const res = [];
  for (let i = 0; i < arr.length; i++) {
    if (!res.includes(arr[i])) res.push(arr[i]);
  }
  return res;
}
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•äº”ï¼šåˆ©ç”¨filter

```javascript
const unique4 = arr => {
  return arr.filter((item, index) => {
    return arr.indexOf(item) === index;
  });
}
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•å…­ï¼šåˆ©ç”¨Map

```javascript
const unique5 = arr => {
  const map = new Map();
  const res = [];
  for (let i = 0; i < arr.length; i++) {
    if (!map.has(arr[i])) {
      map.set(arr[i], true)
      res.push(arr[i]);
    }
  }
  return res;
}
å¤åˆ¶ä»£ç 
```

## 03.ç±»æ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„

ç±»æ•°ç»„æ˜¯å…·æœ‰**length**å±æ€§ï¼Œä½†ä¸å…·æœ‰æ•°ç»„åŸå‹ä¸Šçš„æ–¹æ³•ã€‚å¸¸è§çš„ç±»æ•°ç»„æœ‰**arguments**ã€DOMæ“ä½œæ–¹æ³•è¿”å›çš„ç»“æœã€‚

### æ–¹æ³•ä¸€ï¼šArray.from

```javascript
Array.from(document.querySelectorAll('div'))
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•äºŒï¼šArray.prototype.slice.call()

```javascript
Array.prototype.slice.call(document.querySelectorAll('div'))
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•ä¸‰ï¼šæ‰©å±•è¿ç®—ç¬¦

```javascript
[...document.querySelectorAll('div')]
å¤åˆ¶ä»£ç 
```

### æ–¹æ³•å››ï¼šåˆ©ç”¨concat

```javascript
Array.prototype.concat.apply([], document.querySelectorAll('div'));
å¤åˆ¶ä»£ç 
```

## 04.Array.prototype.filter()

![img](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/804ee51d522746c3b219548d038413c2~tplv-k3u1fbpfcp-watermark.awebp)

```javascript
Array.prototype.filter = function(callback, thisArg) {
  if (this == undefined) {
    throw new TypeError('this is null or not undefined');
  }
  if (typeof callback !== 'function') {
    throw new TypeError(callback + 'is not a function');
  }
  const res = [];
  // è®©Oæˆä¸ºå›è°ƒå‡½æ•°çš„å¯¹è±¡ä¼ é€’ï¼ˆå¼ºåˆ¶è½¬æ¢å¯¹è±¡ï¼‰
  const O = Object(this);
  // >>>0 ä¿è¯lenä¸ºnumberï¼Œä¸”ä¸ºæ­£æ•´æ•°
  const len = O.length >>> 0;
  for (let i = 0; i < len; i++) {
    // æ£€æŸ¥iæ˜¯å¦åœ¨Oçš„å±æ€§ï¼ˆä¼šæ£€æŸ¥åŸå‹é“¾ï¼‰
    if (i in O) {
      // å›è°ƒå‡½æ•°è°ƒç”¨ä¼ å‚
      if (callback.call(thisArg, O[i], i, O)) {
        res.push(O[i]);
      }
    }
  }
  return res;
}
å¤åˆ¶ä»£ç 
```

å¯¹äº`>>>0`æœ‰ç–‘é—®çš„ï¼š[è§£é‡Š>>>0çš„ä½œç”¨](https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F100790268)

## 05.Array.prototype.map()

![img](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b099cf3e06bc4421abac4dc460a13c17~tplv-k3u1fbpfcp-watermark.awebp)

```javascript
Array.prototype.map = function(callback, thisArg) {
  if (this == undefined) {
    throw new TypeError('this is null or not defined');
  }
  if (typeof callback !== 'function') {
    throw new TypeError(callback + ' is not a function');
  }
  const res = [];
  // åŒç†
  const O = Object(this);
  const len = O.length >>> 0;
  for (let i = 0; i < len; i++) {
    if (i in O) {
      // è°ƒç”¨å›è°ƒå‡½æ•°å¹¶ä¼ å…¥æ–°æ•°ç»„
      res[i] = callback.call(thisArg, O[i], i, this);
    }
  }
  return res;
}
å¤åˆ¶ä»£ç 
```

## 06.Array.prototype.forEach()

![img](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c3819fb0c404ae5a8f4cddc4e80731e~tplv-k3u1fbpfcp-watermark.awebp)`forEach`è·Ÿmapç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯`forEach`æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ã€‚

```javascript
Array.prototype.forEach = function(callback, thisArg) {
  if (this == null) {
    throw new TypeError('this is null or not defined');
  }
  if (typeof callback !== "function") {
    throw new TypeError(callback + ' is not a function');
  }
  const O = Object(this);
  const len = O.length >>> 0;
  let k = 0;
  while (k < len) {
    if (k in O) {
      callback.call(thisArg, O[k], k, O);
    }
    k++;
  }
}
å¤åˆ¶ä»£ç 
```

## 07.Array.prototype.reduce()

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e51625eb9e2d47799ff39c5956139af7~tplv-k3u1fbpfcp-watermark.awebp)

```javascript
Array.prototype.reduce = function(callback, initialValue) {
  if (this == undefined) {
    throw new TypeError('this is null or not defined');
  }
  if (typeof callback !== 'function') {
    throw new TypeError(callbackfn + ' is not a function');
  }
  const O = Object(this);
  const len = this.length >>> 0;
  let accumulator = initialValue;
  let k = 0;
  // å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºundefinedçš„æƒ…å†µä¸‹
  // åˆ™æ•°ç»„çš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆå€¼ä½œä¸ºç´¯åŠ å™¨çš„åˆå§‹å€¼
  if (accumulator === undefined) {
    while (k < len && !(k in O)) {
      k++;
    }
    // å¦‚æœè¶…å‡ºæ•°ç»„ç•Œé™è¿˜æ²¡æœ‰æ‰¾åˆ°ç´¯åŠ å™¨çš„åˆå§‹å€¼ï¼Œåˆ™TypeError
    if (k >= len) {
      throw new TypeError('Reduce of empty array with no initial value');
    }
    accumulator = O[k++];
  }
  while (k < len) {
    if (k in O) {
      accumulator = callback.call(undefined, accumulator, O[k], k, O);
    }
    k++;
  }
  return accumulator;
}
å¤åˆ¶ä»£ç 
```

## 08.Function.prototype.apply()

ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç»‘å®šçš„thisï¼Œé»˜è®¤ä¸º`window`ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„

```javascript
Function.prototype.apply = function(context = window, args) {
  if (typeof this !== 'function') {
    throw new TypeError('Type Error');
  }
  const fn = Symbol('fn');
  context[fn] = this;

  const res = context[fn](...args);
  delete context[fn];
  return res;
}
å¤åˆ¶ä»£ç 
```

## 09.Function.prototype.call

äº`call`å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œ`call()`æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨

```javascript
Function.prototype.call = function(context = window, ...args) {
  if (typeof this !== 'function') {
    throw new TypeError('Type Error');
  }
  const fn = Symbol('fn');
  context[fn] = this;

  const res = context[fn](...args);
  delete context[fn];
  return res;
}
å¤åˆ¶ä»£ç 
```

## 10.Function.prototype.bind

```javascript
Function.prototype.bind = function(context, ...args) {
  if (typeof this !== 'function') {
    throw new Error("Type Error");
  }
  // ä¿å­˜thisçš„å€¼
  var self = this;

  return function F() {
    // è€ƒè™‘newçš„æƒ…å†µ
    if(this instanceof F) {
      return new self(...args, ...arguments)
    }
    return self.apply(context, [...args, ...arguments])
  }
}
å¤åˆ¶ä»£ç 
```

## 11.debounceï¼ˆé˜²æŠ–ï¼‰

è§¦å‘é«˜é¢‘æ—¶é—´ånç§’å†…å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡,å¦‚æœnç§’å†…é«˜é¢‘æ—¶é—´å†æ¬¡è§¦å‘,åˆ™é‡æ–°è®¡ç®—æ—¶é—´ã€‚

```javascript
const debounce = (fn, time) => {
  let timeout = null;
  return function() {
    clearTimeout(timeout)
    timeout = setTimeout(() => {
      fn.apply(this, arguments);
    }, time);
  }
};
å¤åˆ¶ä»£ç 
```

é˜²æŠ–å¸¸åº”ç”¨äºç”¨æˆ·è¿›è¡Œæœç´¢è¾“å…¥èŠ‚çº¦è¯·æ±‚èµ„æºï¼Œ`window`è§¦å‘`resize`äº‹ä»¶æ—¶è¿›è¡Œé˜²æŠ–åªè§¦å‘ä¸€æ¬¡ã€‚

## 12.throttleï¼ˆèŠ‚æµï¼‰

é«˜é¢‘æ—¶é—´è§¦å‘,ä½†nç§’å†…åªä¼šæ‰§è¡Œä¸€æ¬¡,æ‰€ä»¥èŠ‚æµä¼šç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ã€‚

```javascript
const throttle = (fn, time) => {
  let flag = true;
  return function() {
    if (!flag) return;
    flag = false;
    setTimeout(() => {
      fn.apply(this, arguments);
      flag = true;
    }, time);
  }
}
å¤åˆ¶ä»£ç 
```

èŠ‚æµå¸¸åº”ç”¨äºé¼ æ ‡ä¸æ–­ç‚¹å‡»è§¦å‘ã€ç›‘å¬æ»šåŠ¨äº‹ä»¶ã€‚

## 13.å‡½æ•°ç‚é‡ŒåŒ–

> æŒ‡çš„æ˜¯å°†ä¸€ä¸ªæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•° å˜ä¸º æ¥å—ä¸€ä¸ªå‚æ•°è¿”å›ä¸€ä¸ªå‡½æ•°çš„å›ºå®šå½¢å¼ï¼Œè¿™æ ·ä¾¿äºå†æ¬¡è°ƒç”¨ï¼Œä¾‹å¦‚f(1)(2)

ç»å…¸é¢è¯•é¢˜ï¼šå®ç°`add(1)(2)(3)(4)=10;` ã€ `add(1)(1,2,3)(2)=9;`

```javascript
function add() {
  const _args = [...arguments];
  function fn() {
    _args.push(...arguments);
    return fn;
  }
  fn.toString = function() {
    return _args.reduce((sum, cur) => sum + cur);
  }
  return fn;
}
å¤åˆ¶ä»£ç 
```

## 14.æ¨¡æ‹Ÿnewæ“ä½œ

3ä¸ªæ­¥éª¤ï¼š

1. ä»¥`ctor.prototype`ä¸ºåŸå‹åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚
2. æ‰§è¡Œæ„é€ å‡½æ•°å¹¶å°†thisç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šã€‚
3. åˆ¤æ–­æ„é€ å‡½æ•°æ‰§è¡Œè¿”å›çš„ç»“æœæ˜¯å¦æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œè‹¥æ˜¯åˆ™è¿”å›æ„é€ å‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œå¦åˆ™è¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚

```javascript
function newOperator(ctor, ...args) {
  if (typeof ctor !== 'function') {
    throw new TypeError('Type Error');
  }
  const obj = Object.create(ctor.prototype);
  const res = ctor.apply(obj, args);

  const isObject = typeof res === 'object' && res !== null;
  const isFunction = typeof res === 'function';
  return isObject || isFunction ? res : obj;
}
å¤åˆ¶ä»£ç 
```

## 15.instanceof

`instanceof`è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„`prototype`å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚

```javascript
const myInstanceof = (left, right) => {
  // åŸºæœ¬æ•°æ®ç±»å‹éƒ½è¿”å›false
  if (typeof left !== 'object' || left === null) return false;
  let proto = Object.getPrototypeOf(left);
  while (true) {
    if (proto === null) return false;
    if (proto === right.prototype) return true;
    proto = Object.getPrototypeOf(proto);
  }
}
å¤åˆ¶ä»£ç 
```

## 16.åŸå‹ç»§æ‰¿

è¿™é‡Œåªå†™å¯„ç”Ÿç»„åˆç»§æ‰¿äº†ï¼Œä¸­é—´è¿˜æœ‰å‡ ä¸ªæ¼”å˜è¿‡æ¥çš„ç»§æ‰¿ä½†éƒ½æœ‰ä¸€äº›ç¼ºé™·

```javascript
function Parent() {
  this.name = 'parent';
}
function Child() {
  Parent.call(this);
  this.type = 'children';
}
Child.prototype = Object.create(Parent.prototype);
Child.prototype.constructor = Child;
å¤åˆ¶ä»£ç 
```

## 17.Object.is

`Object.is`è§£å†³çš„ä¸»è¦æ˜¯è¿™ä¸¤ä¸ªé—®é¢˜ï¼š

```
+0 === -0  // true
NaN === NaN // false
å¤åˆ¶ä»£ç 
const is= (x, y) => {
  if (x === y) {
    // +0å’Œ-0åº”è¯¥ä¸ç›¸ç­‰
    return x !== 0 || y !== 0 || 1/x === 1/y;
  } else {
    return x !== x && y !== y;
  }
}
å¤åˆ¶ä»£ç 
```

## 18.Object.assign

`Object.assign()`æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ï¼ˆè¯·æ³¨æ„è¿™ä¸ªæ“ä½œæ˜¯æµ…æ‹·è´ï¼‰

```javascript
Object.defineProperty(Object, 'assign', {
  value: function(target, ...args) {
    if (target == null) {
      return new TypeError('Cannot convert undefined or null to object');
    }
    
    // ç›®æ ‡å¯¹è±¡éœ€è¦ç»Ÿä¸€æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œè‹¥ä¸æ˜¯ä¼šè‡ªåŠ¨è½¬æ¢
    const to = Object(target);

    for (let i = 0; i < args.length; i++) {
      // æ¯ä¸€ä¸ªæºå¯¹è±¡
      const nextSource = args[i];
      if (nextSource !== null) {
        // ä½¿ç”¨for...inå’ŒhasOwnPropertyåŒé‡åˆ¤æ–­ï¼Œç¡®ä¿åªæ‹¿åˆ°æœ¬èº«çš„å±æ€§ã€æ–¹æ³•ï¼ˆä¸åŒ…å«ç»§æ‰¿çš„ï¼‰
        for (const nextKey in nextSource) {
          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
            to[nextKey] = nextSource[nextKey];
          }
        }
      }
    }
    return to;
  },
  // ä¸å¯æšä¸¾
  enumerable: false,
  writable: true,
  configurable: true,
})
å¤åˆ¶ä»£ç 
```

## 19.æ·±æ‹·è´

é€’å½’çš„å®Œæ•´ç‰ˆæœ¬ï¼ˆè€ƒè™‘åˆ°äº†Symbolå±æ€§ï¼‰ï¼š

```javascript
const cloneDeep1 = (target, hash = new WeakMap()) => {
  // å¯¹äºä¼ å…¥å‚æ•°å¤„ç†
  if (typeof target !== 'object' || target === null) {
    return target;
  }
  // å“ˆå¸Œè¡¨ä¸­å­˜åœ¨ç›´æ¥è¿”å›
  if (hash.has(target)) return hash.get(target);

  const cloneTarget = Array.isArray(target) ? [] : {};
  hash.set(target, cloneTarget);

  // é’ˆå¯¹Symbolå±æ€§
  const symKeys = Object.getOwnPropertySymbols(target);
  if (symKeys.length) {
    symKeys.forEach(symKey => {
      if (typeof target[symKey] === 'object' && target[symKey] !== null) {
        cloneTarget[symKey] = cloneDeep1(target[symKey]);
      } else {
        cloneTarget[symKey] = target[symKey];
      }
    })
  }

  for (const i in target) {
    if (Object.prototype.hasOwnProperty.call(target, i)) {
      cloneTarget[i] =
        typeof target[i] === 'object' && target[i] !== null
        ? cloneDeep1(target[i], hash)
        : target[i];
    }
  }
  return cloneTarget;
}
å¤åˆ¶ä»£ç 
```

## 20.Promise

å®ç°æ€è·¯ï¼š[Promiseæºç å®ç°](https://juejin.cn/post/6860037916622913550)

```javascript
// æ¨¡æ‹Ÿå®ç°Promise
// Promiseåˆ©ç”¨ä¸‰å¤§æ‰‹æ®µè§£å†³å›è°ƒåœ°ç‹±ï¼š
// 1. å›è°ƒå‡½æ•°å»¶è¿Ÿç»‘å®š
// 2. è¿”å›å€¼ç©¿é€
// 3. é”™è¯¯å†’æ³¡

// å®šä¹‰ä¸‰ç§çŠ¶æ€
const PENDING = 'PENDING';      // è¿›è¡Œä¸­
const FULFILLED = 'FULFILLED';  // å·²æˆåŠŸ
const REJECTED = 'REJECTED';    // å·²å¤±è´¥

class Promise {
  constructor(exector) {
    // åˆå§‹åŒ–çŠ¶æ€
    this.status = PENDING;
    // å°†æˆåŠŸã€å¤±è´¥ç»“æœæ”¾åœ¨thisä¸Šï¼Œä¾¿äºthenã€catchè®¿é—®
    this.value = undefined;
    this.reason = undefined;
    // æˆåŠŸæ€å›è°ƒå‡½æ•°é˜Ÿåˆ—
    this.onFulfilledCallbacks = [];
    // å¤±è´¥æ€å›è°ƒå‡½æ•°é˜Ÿåˆ—
    this.onRejectedCallbacks = [];

    const resolve = value => {
      // åªæœ‰è¿›è¡Œä¸­çŠ¶æ€æ‰èƒ½æ›´æ”¹çŠ¶æ€
      if (this.status === PENDING) {
        this.status = FULFILLED;
        this.value = value;
        // æˆåŠŸæ€å‡½æ•°ä¾æ¬¡æ‰§è¡Œ
        this.onFulfilledCallbacks.forEach(fn => fn(this.value));
      }
    }
    const reject = reason => {
      // åªæœ‰è¿›è¡Œä¸­çŠ¶æ€æ‰èƒ½æ›´æ”¹çŠ¶æ€
      if (this.status === PENDING) {
        this.status = REJECTED;
        this.reason = reason;
        // å¤±è´¥æ€å‡½æ•°ä¾æ¬¡æ‰§è¡Œ
        this.onRejectedCallbacks.forEach(fn => fn(this.reason))
      }
    }
    try {
      // ç«‹å³æ‰§è¡Œexecutor
      // æŠŠå†…éƒ¨çš„resolveå’Œrejectä¼ å…¥executorï¼Œç”¨æˆ·å¯è°ƒç”¨resolveå’Œreject
      exector(resolve, reject);
    } catch(e) {
      // executoræ‰§è¡Œå‡ºé”™ï¼Œå°†é”™è¯¯å†…å®¹rejectæŠ›å‡ºå»
      reject(e);
    }
  }
  then(onFulfilled, onRejected) {
    onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : value => value;
    onRejected = typeof onRejected === 'function'? onRejected :
      reason => { throw new Error(reason instanceof Error ? reason.message : reason) }
    // ä¿å­˜this
    const self = this;
    return new Promise((resolve, reject) => {
      if (self.status === PENDING) {
        self.onFulfilledCallbacks.push(() => {
          // tryæ•è·é”™è¯¯
          try {
            // æ¨¡æ‹Ÿå¾®ä»»åŠ¡
            setTimeout(() => {
              const result = onFulfilled(self.value);
              // åˆ†ä¸¤ç§æƒ…å†µï¼š
              // 1. å›è°ƒå‡½æ•°è¿”å›å€¼æ˜¯Promiseï¼Œæ‰§è¡Œthenæ“ä½œ
              // 2. å¦‚æœä¸æ˜¯Promiseï¼Œè°ƒç”¨æ–°Promiseçš„resolveå‡½æ•°
              result instanceof Promise ? result.then(resolve, reject) : resolve(result);
            })
          } catch(e) {
            reject(e);
          }
        });
        self.onRejectedCallbacks.push(() => {
          // ä»¥ä¸‹åŒç†
          try {
            setTimeout(() => {
              const result = onRejected(self.reason);
              // ä¸åŒç‚¹ï¼šæ­¤æ—¶æ˜¯reject
              result instanceof Promise ? result.then(resolve, reject) : resolve(result);
            })
          } catch(e) {
            reject(e);
          }
        })
      } else if (self.status === FULFILLED) {
        try {
          setTimeout(() => {
            const result = onFulfilled(self.value);
            result instanceof Promise ? result.then(resolve, reject) : resolve(result);
          });
        } catch(e) {
          reject(e);
        }
      } else if (self.status === REJECTED) {
        try {
          setTimeout(() => {
            const result = onRejected(self.reason);
            result instanceof Promise ? result.then(resolve, reject) : resolve(result);
          })
        } catch(e) {
          reject(e);
        }
      }
    });
  }
  catch(onRejected) {
    return this.then(null, onRejected);
  }
  static resolve(value) {
    if (value instanceof Promise) {
      // å¦‚æœæ˜¯Promiseå®ä¾‹ï¼Œç›´æ¥è¿”å›
      return value;
    } else {
      // å¦‚æœä¸æ˜¯Promiseå®ä¾‹ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼ŒçŠ¶æ€ä¸ºFULFILLED
      return new Promise((resolve, reject) => resolve(value));
    }
  }
  static reject(reason) {
    return new Promise((resolve, reject) => {
      reject(reason);
    })
  }
  static all(promiseArr) {
    const len = promiseArr.length;
    const values = new Array(len);
    // è®°å½•å·²ç»æˆåŠŸæ‰§è¡Œçš„promiseä¸ªæ•°
    let count = 0;
    return new Promise((resolve, reject) => {
      for (let i = 0; i < len; i++) {
        // Promise.resolve()å¤„ç†ï¼Œç¡®ä¿æ¯ä¸€ä¸ªéƒ½æ˜¯promiseå®ä¾‹
        Promise.resolve(promiseArr[i]).then(
          val => {
            values[i] = val;
            count++;
            // å¦‚æœå…¨éƒ¨æ‰§è¡Œå®Œï¼Œè¿”å›promiseçš„çŠ¶æ€å°±å¯ä»¥æ”¹å˜äº†
            if (count === len) resolve(values);
          },
          err => reject(err),
        );
      }
    })
  }
  static race(promiseArr) {
    return new Promise((resolve, reject) => {
      promiseArr.forEach(p => {
        Promise.resolve(p).then(
          val => resolve(val),
          err => reject(err),
        )
      })
    })
  }
}
å¤åˆ¶ä»£ç 
```

## 21.Promise.all

`Promise.all`æ˜¯æ”¯æŒé“¾å¼è°ƒç”¨çš„ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è¿”å›äº†ä¸€ä¸ªPromiseå®ä¾‹ï¼Œé€šè¿‡`resolve`å’Œ`reject`æ¥æ”¹å˜å®ä¾‹çŠ¶æ€ã€‚

```javascript
Promise.myAll = function(promiseArr) {
  return new Promise((resolve, reject) => {
    const ans = [];
    let index = 0;
    for (let i = 0; i < promiseArr.length; i++) {
      promiseArr[i]
      .then(res => {
        ans[i] = res;
        index++;
        if (index === promiseArr.length) {
          resolve(ans);
        }
      })
      .catch(err => reject(err));
    }
  })
}
å¤åˆ¶ä»£ç 
```

## 22.Promise.race

```javascript
Promise.race = function(promiseArr) {
  return new Promise((resolve, reject) => {
    promiseArr.forEach(p => {
      // å¦‚æœä¸æ˜¯Promiseå®ä¾‹éœ€è¦è½¬åŒ–ä¸ºPromiseå®ä¾‹
      Promise.resolve(p).then(
        val => resolve(val),
        err => reject(err),
      )
    })
  })
}
å¤åˆ¶ä»£ç 
```

## 23.Promiseå¹¶è¡Œé™åˆ¶

å°±æ˜¯å®ç°æœ‰å¹¶è¡Œé™åˆ¶çš„Promiseè°ƒåº¦å™¨é—®é¢˜ã€‚

è¯¦ç»†å®ç°æ€è·¯ï¼š[æŸæ¡é«˜é¢‘é¢è¯•åŸé¢˜ï¼šå®ç°æœ‰å¹¶è¡Œé™åˆ¶çš„Promiseè°ƒåº¦å™¨](https://juejin.cn/post/6854573217013563405)

```javascript
class Scheduler {
  constructor() {
    this.queue = [];
    this.maxCount = 2;
    this.runCounts = 0;
  }
  add(promiseCreator) {
    this.queue.push(promiseCreator);
  }
  taskStart() {
    for (let i = 0; i < this.maxCount; i++) {
      this.request();
    }
  }
  request() {
    if (!this.queue || !this.queue.length || this.runCounts >= this.maxCount) {
      return;
    }
    this.runCounts++;

    this.queue.shift()().then(() => {
      this.runCounts--;
      this.request();
    });
  }
}
   
const timeout = time => new Promise(resolve => {
  setTimeout(resolve, time);
})
  
const scheduler = new Scheduler();
  
const addTask = (time,order) => {
  scheduler.add(() => timeout(time).then(()=>console.log(order)))
}
  
  
addTask(1000, '1');
addTask(500, '2');
addTask(300, '3');
addTask(400, '4');
scheduler.taskStart()
// 2
// 3
// 1
// 4
å¤åˆ¶ä»£ç 
```

## 24.JSONP

scriptæ ‡ç­¾ä¸éµå¾ªåŒæºåè®®ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œ**è·¨åŸŸè¯·æ±‚**ï¼Œä¼˜ç‚¹å°±æ˜¯å…¼å®¹æ€§å¥½ä½†ä»…é™äºGETè¯·æ±‚

```javascript
const jsonp = ({ url, params, callbackName }) => {
  const generateUrl = () => {
    let dataSrc = '';
    for (let key in params) {
      if (Object.prototype.hasOwnProperty.call(params, key)) {
        dataSrc += `${key}=${params[key]}&`;
      }
    }
    dataSrc += `callback=${callbackName}`;
    return `${url}?${dataSrc}`;
  }
  return new Promise((resolve, reject) => {
    const scriptEle = document.createElement('script');
    scriptEle.src = generateUrl();
    document.body.appendChild(scriptEle);
    window[callbackName] = data => {
      resolve(data);
      document.removeChild(scriptEle);
    }
  })
}
å¤åˆ¶ä»£ç 
```

## 25.AJAX

```javascript
const getJSON = function(url) {
  return new Promise((resolve, reject) => {
    const xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Mscrosoft.XMLHttp');
    xhr.open('GET', url, false);
    xhr.setRequestHeader('Accept', 'application/json');
    xhr.onreadystatechange = function() {
      if (xhr.readyState !== 4) return;
      if (xhr.status === 200 || xhr.status === 304) {
        resolve(xhr.responseText);
      } else {
        reject(new Error(xhr.responseText));
      }
    }
    xhr.send();
  })
}
å¤åˆ¶ä»£ç 
```

## 26.eventæ¨¡å—

å®ç°nodeä¸­å›è°ƒå‡½æ•°çš„æœºåˆ¶ï¼Œnodeä¸­å›è°ƒå‡½æ•°å…¶å®æ˜¯å†…éƒ¨ä½¿ç”¨äº†**è§‚å¯Ÿè€…æ¨¡å¼**ã€‚

> è§‚å¯Ÿè€…æ¨¡å¼ï¼šå®šä¹‰äº†å¯¹è±¡é—´ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ç›®æ ‡å¯¹è±¡Subjectå‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡Observeréƒ½ä¼šå¾—åˆ°é€šçŸ¥ã€‚

```javascript
function EventEmitter() {
  this.events = new Map();
}

// éœ€è¦å®ç°çš„ä¸€äº›æ–¹æ³•ï¼š
// addListenerã€removeListenerã€onceã€removeAllListenersã€emit

// æ¨¡æ‹Ÿå®ç°addlisteneræ–¹æ³•
const wrapCallback = (fn, once = false) => ({ callback: fn, once });
EventEmitter.prototype.addListener = function(type, fn, once = false) {
  const hanlder = this.events.get(type);
  if (!hanlder) {
    // æ²¡æœ‰typeç»‘å®šäº‹ä»¶
    this.events.set(type, wrapCallback(fn, once));
  } else if (hanlder && typeof hanlder.callback === 'function') {
    // ç›®å‰typeäº‹ä»¶åªæœ‰ä¸€ä¸ªå›è°ƒ
    this.events.set(type, [hanlder, wrapCallback(fn, once)]);
  } else {
    // ç›®å‰typeäº‹ä»¶æ•°>=2
    hanlder.push(wrapCallback(fn, once));
  }
}
// æ¨¡æ‹Ÿå®ç°removeListener
EventEmitter.prototype.removeListener = function(type, listener) {
  const hanlder = this.events.get(type);
  if (!hanlder) return;
  if (!Array.isArray(this.events)) {
    if (hanlder.callback === listener.callback) this.events.delete(type);
    else return;
  }
  for (let i = 0; i < hanlder.length; i++) {
    const item = hanlder[i];
    if (item.callback === listener.callback) {
      hanlder.splice(i, 1);
      i--;
      if (hanlder.length === 1) {
        this.events.set(type, hanlder[0]);
      }
    }
  }
}
// æ¨¡æ‹Ÿå®ç°onceæ–¹æ³•
EventEmitter.prototype.once = function(type, listener) {
  this.addListener(type, listener, true);
}
// æ¨¡æ‹Ÿå®ç°emitæ–¹æ³•
EventEmitter.prototype.emit = function(type, ...args) {
  const hanlder = this.events.get(type);
  if (!hanlder) return;
  if (Array.isArray(hanlder)) {
    hanlder.forEach(item => {
      item.callback.apply(this, args);
      if (item.once) {
        this.removeListener(type, item);
      }
    })
  } else {
    hanlder.callback.apply(this, args);
    if (hanlder.once) {
      this.events.delete(type);
    }
  }
  return true;
}
EventEmitter.prototype.removeAllListeners = function(type) {
  const hanlder = this.events.get(type);
  if (!hanlder) return;
  this.events.delete(type);
}
å¤åˆ¶ä»£ç 
```

## 27.å›¾ç‰‡æ‡’åŠ è½½

å¯ä»¥ç»™imgæ ‡ç­¾ç»Ÿä¸€è‡ªå®šä¹‰å±æ€§`data-src='default.png'`ï¼Œå½“æ£€æµ‹åˆ°å›¾ç‰‡å‡ºç°åœ¨çª—å£ä¹‹åå†è¡¥å……**src**å±æ€§ï¼Œæ­¤æ—¶æ‰ä¼šè¿›è¡Œå›¾ç‰‡èµ„æºåŠ è½½ã€‚

```javascript
function lazyload() {
  const imgs = document.getElementsByTagName('img');
  const len = imgs.length;
  // è§†å£çš„é«˜åº¦
  const viewHeight = document.documentElement.clientHeight;
  // æ»šåŠ¨æ¡é«˜åº¦
  const scrollHeight = document.documentElement.scrollTop || document.body.scrollTop;
  for (let i = 0; i < len; i++) {
    const offsetHeight = imgs[i].offsetTop;
    if (offsetHeight < viewHeight + scrollHeight) {
      const src = imgs[i].dataset.src;
      imgs[i].src = src;
    }
  }
}

// å¯ä»¥ä½¿ç”¨èŠ‚æµä¼˜åŒ–ä¸€ä¸‹
window.addEventListener('scroll', lazyload);
å¤åˆ¶ä»£ç 
```

## 28.æ»šåŠ¨åŠ è½½

åŸç†å°±æ˜¯ç›‘å¬é¡µé¢æ»šåŠ¨äº‹ä»¶ï¼Œ**åˆ†æclientHeight**ã€**scrollTop**ã€**scrollHeight**ä¸‰è€…çš„å±æ€§å…³ç³»ã€‚

```javascript
window.addEventListener('scroll', function() {
  const clientHeight = document.documentElement.clientHeight;
  const scrollTop = document.documentElement.scrollTop;
  const scrollHeight = document.documentElement.scrollHeight;
  if (clientHeight + scrollTop >= scrollHeight) {
    // æ£€æµ‹åˆ°æ»šåŠ¨è‡³é¡µé¢åº•éƒ¨ï¼Œè¿›è¡Œåç»­æ“ä½œ
    // ...
  }
}, false);
å¤åˆ¶ä»£ç 
```

ä¸€ä¸ªDemoï¼š[é¡µé¢æ»šåŠ¨åŠ è½½çš„Demo](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSherrybabyOne%2FDemos%2Fblob%2Fmaster%2FInterview%2FJavaScript%2F%E6%BB%9A%E5%8A%A8%E5%8A%A0%E8%BD%BD.html)

## 29.æ¸²æŸ“å‡ ä¸‡æ¡æ•°æ®ä¸å¡ä½é¡µé¢

æ¸²æŸ“å¤§æ•°æ®æ—¶ï¼Œåˆç†ä½¿ç”¨**createDocumentFragment**å’Œ**requestAnimationFrame**ï¼Œå°†æ“ä½œåˆ‡åˆ†ä¸ºä¸€å°æ®µä¸€å°æ®µæ‰§è¡Œã€‚

```javascript
setTimeout(() => {
  // æ’å…¥åä¸‡æ¡æ•°æ®
  const total = 100000;
  // ä¸€æ¬¡æ’å…¥çš„æ•°æ®
  const once = 20;
  // æ’å…¥æ•°æ®éœ€è¦çš„æ¬¡æ•°
  const loopCount = Math.ceil(total / once);
  let countOfRender = 0;
  const ul = document.querySelector('ul');
  // æ·»åŠ æ•°æ®çš„æ–¹æ³•
  function add() {
    const fragment = document.createDocumentFragment();
    for(let i = 0; i < once; i++) {
      const li = document.createElement('li');
      li.innerText = Math.floor(Math.random() * total);
      fragment.appendChild(li);
    }
    ul.appendChild(fragment);
    countOfRender += 1;
    loop();
  }
  function loop() {
    if(countOfRender < loopCount) {
      window.requestAnimationFrame(add);
    }
  }
  loop();
}, 0)
å¤åˆ¶ä»£ç 
```

## 30.æ‰“å°å‡ºå½“å‰ç½‘é¡µä½¿ç”¨äº†å¤šå°‘ç§HTMLå…ƒç´ 

ä¸€è¡Œä»£ç å¯ä»¥è§£å†³ï¼š

```javascript
const fn = () => {
  return [...new Set([...document.querySelectorAll('*')].map(el => el.tagName))].length;
}
å¤åˆ¶ä»£ç 
```

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šDOMæ“ä½œè¿”å›çš„æ˜¯**ç±»æ•°ç»„**ï¼Œéœ€è¦è½¬æ¢ä¸ºæ•°ç»„ä¹‹åæ‰å¯ä»¥è°ƒç”¨æ•°ç»„çš„æ–¹æ³•ã€‚

## 31.å°†VirtualDomè½¬åŒ–ä¸ºçœŸå®DOMç»“æ„

è¿™æ˜¯å½“å‰SPAåº”ç”¨çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€

```javascript
// vnodeç»“æ„ï¼š
// {
//   tag,
//   attrs,
//   children,
// }

//Virtual DOM => DOM
function render(vnode, container) {
  container.appendChild(_render(vnode));
}
function _render(vnode) {
  // å¦‚æœæ˜¯æ•°å­—ç±»å‹è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
  if (typeof vnode === 'number') {
    vnode = String(vnode);
  }
  // å­—ç¬¦ä¸²ç±»å‹ç›´æ¥å°±æ˜¯æ–‡æœ¬èŠ‚ç‚¹
  if (typeof vnode === 'string') {
    return document.createTextNode(vnode);
  }
  // æ™®é€šDOM
  const dom = document.createElement(vnode.tag);
  if (vnode.attrs) {
    // éå†å±æ€§
    Object.keys(vnode.attrs).forEach(key => {
      const value = vnode.attrs[key];
      dom.setAttribute(key, value);
    })
  }
  // å­æ•°ç»„è¿›è¡Œé€’å½’æ“ä½œ
  vnode.children.forEach(child => render(child, dom));
  return dom;
}
å¤åˆ¶ä»£ç 
```

## 32.å­—ç¬¦ä¸²è§£æé—®é¢˜

```javascript
var a = {
	b: 123,
	c: '456',
	e: '789',
}
var str=`a{a.b}aa{a.c}aa {a.d}aaaa`;
// => 'a123aa456aa {a.d}aaaa'
å¤åˆ¶ä»£ç 
```

å®ç°å‡½æ•°ä½¿å¾—å°†strå­—ç¬¦ä¸²ä¸­çš„`{}`å†…çš„å˜é‡æ›¿æ¢ï¼Œå¦‚æœå±æ€§ä¸å­˜åœ¨ä¿æŒåŸæ ·ï¼ˆæ¯”å¦‚`{a.d}`ï¼‰

ç±»ä¼¼äºæ¨¡ç‰ˆå­—ç¬¦ä¸²ï¼Œä½†æœ‰ä¸€ç‚¹å‡ºå…¥ï¼Œå®é™…ä¸ŠåŸç†å¤§å·®ä¸å·®

```javascript
const fn1 = (str, obj) => {
	let res = '';
    // æ ‡å¿—ä½ï¼Œæ ‡å¿—å‰é¢æ˜¯å¦æœ‰{
	let flag = false;
	let start;
	for (let i = 0; i < str.length; i++) {
		if (str[i] === '{') {
			flag = true;
			start = i + 1;
			continue;
		}
		if (!flag) res += str[i];
		else {
			if (str[i] === '}') {
				flag = false;
				res += match(str.slice(start, i), obj);
			}
		}
	}
	return res;
}
// å¯¹è±¡åŒ¹é…æ“ä½œ
const match = (str, obj) => {
	const keys = str.split('.').slice(1);
	let index = 0;
	let o = obj;
	while (index < keys.length) {
		const key = keys[index];
		if (!o[key]) {
			return `{${str}}`;
		} else {
			o = o[key];
		}
		index++;
	}
	return o;
}
å¤åˆ¶ä»£ç 
```

> æ¬¢è¿å…³æ³¨ã€Œå‰ç«¯æ´›éœã€å¾®ä¿¡å·è·å–æ›´å¤šå­¦ä¹ èµ„æ–™ï¼ŒæŒç»­æ›´æ–°å‰ç«¯ç›¸å…³æ–‡ç« ï½
>
> æˆ‘ä»¬æ˜¯å­—èŠ‚è·³åŠ¨äº’å¨±ç ”å‘å‰ç«¯æ¶æ„å›¢é˜Ÿï¼Œç›®å‰å¤§è§„æ¨¡æ‹›äººä¸­ï¼ŒåŒ—äº¬æ­å·æ·±åœ³ã€ç¤¾æ‹›å®ä¹ éƒ½æœ‰ä½ç½®ï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡FE-luoxiaæŠ•ç®€å†éªšæ‰°ï½

æ–‡ç« åˆ†ç±»

[å‰ç«¯](https://juejin.cn/frontend)

æ–‡ç« æ ‡ç­¾

[![img](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/leancloud-assets/5d70fd6af940df373834.png~tplv-t2oaga2asx-no-mark:80:80:0:0.awebp)JavaScript](https://juejin.cn/tag/JavaScript)







[![img](https://p3-passport.byteacctimg.com/img/user-avatar/068f9f9b9d18ebc5d4521272ca0d79dc~300x300.image)](https://juejin.cn/user/606586150332824)

[æ´›éœ ![lv-3](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e108c685147dfe1fb03d4a37257fb417.svg)](https://juejin.cn/user/606586150332824)WXå…¬ä¼—å· @ å‰ç«¯æ´›éœ

[å‘å¸ƒäº† 7 ç¯‡æ–‡ç«  Â· ](https://juejin.cn/user/606586150332824/posts)è·å¾—ç‚¹èµ 2,710 Â· è·å¾—é˜…è¯» 96,768

å…³æ³¨





[å®‰è£…æ˜é‡‘æµè§ˆå™¨æ’ä»¶](https://juejin.cn/extension/?utm_source=juejin.cn&utm_medium=post&utm_campaign=extension_promotion)

å¤šå†…å®¹èšåˆæµè§ˆã€å¤šå¼•æ“å¿«æ·æœç´¢ã€å¤šå·¥å…·ä¾¿æ·ææ•ˆã€å¤šæ¨¡å¼éšå¿ƒç•…äº«ï¼Œä½ æƒ³è¦çš„ï¼Œè¿™é‡Œéƒ½æœ‰ï¼

[å‰å¾€å®‰è£…](https://juejin.cn/extension/?utm_source=juejin.cn&utm_medium=post&utm_campaign=extension_promotion)

![img](https://p26-passport.byteacctimg.com/img/mosaic-legacy/3795/3044413937~300x300.image)

å‘è¡¨è¯„è®º

çƒ­é—¨è¯„è®º

[![è¿‡é†‰çš„å¤´åƒ](https://p6-passport.byteacctimg.com/img/user-avatar/bd70e515bdc23a6ad387235f323ee2a5~300x300.image)](https://juejin.cn/user/3350967174575389)

[è¿‡é†‰](https://juejin.cn/user/3350967174575389)

apiæµ‹è¯•å·¥ç¨‹å¸ˆ @ æŸäº’è”ç½‘åŸä¸­æ‘1å¹´å‰

æ•°ç»„æ‰å¹³åŒ–:[1, [2, [3, [4, 5]]], 6].toString().split(',')ä¹Ÿå¯ä»¥![ğŸ˜‚](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/asset/twemoji/2.6.0/svg/1f602.svg~tplv-t2oaga2asx-image.image)

4

3

[![img](https://p26-passport.byteacctimg.com/img/user-avatar/8a031733495d01e2bb4b3d2c24fa0ae4~300x300.image)](https://juejin.cn/user/1908407918137543)

[å°ç‹—ç‹—åå¿ƒçœ¼å¤šç€å‘¢![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/1908407918137543)

1å¹´å‰

[1, [2, [3, 4]]].toString().split(',').map(Number) è¿™ä¸ªè¿™ä¸ªï¼Œç»“åˆä¸Šé¢å¤§ä½¬çš„è§£ç­”![ğŸ¤“](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/asset/twemoji/2.6.0/svg/1f913.svg~tplv-t2oaga2asx-image.image)![ğŸ¤“](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/asset/twemoji/2.6.0/svg/1f913.svg~tplv-t2oaga2asx-image.image)

1

å›å¤

[![img](https://p9-passport.byteacctimg.com/img/user-avatar/9b707f832b5401181e42d8e1499ef3fe~300x300.image)](https://juejin.cn/user/650525156609342)

[çŸ³å¤´stone](https://juejin.cn/user/650525156609342)

1å¹´å‰

å…„å¼Ÿä½ çš„å·®ä¸€æ­¥ï¼Œåº”è¯¥æ˜¯è¿™æ ·[1, [2, [3, [4, 5]]], 6].toString().split(",").map(Number)